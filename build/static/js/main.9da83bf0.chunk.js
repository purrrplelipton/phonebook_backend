(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{20:function(e,n,t){e.exports=t(49)},28:function(e,n,t){},47:function(e,n,t){},49:function(e,n,t){"use strict";t.r(n);var a=t(0),c=t.n(a),u=t(19),r=t.n(u),s=t(3),o=t(6),l=t(2);var m=function(e){return e.children},i=function(e){var n=e.person,t=e.clicked;return c.a.createElement(m,null,c.a.createElement("p",null,c.a.createElement("span",{className:"contact-name"},n.name)," ",n.number," "),c.a.createElement("button",{onClick:function(){return t(n.id)}},"delete"))},d=function(e){var n=e.query,t=e.persons,a=e.clicked,u=new RegExp(n,"i");return t.filter(function(e){return u.test(e.name)}).length>0?t.filter(function(e){return u.test(e.name)}).map(function(e,n){return c.a.createElement("div",{className:"person prsn-".concat(n),key:e.id},c.a.createElement(i,{person:e,clicked:a}))}):c.a.createElement("p",null,"No contacts found.")},p=(t(28),{animationName:"popDown",animationDuration:"3.5s",animationTimingFunction:"ease-in-out"}),f=function(e){var n=e.message,t=n.success,a=n.message;return t&&a?c.a.createElement("p",{style:Object(s.a)({},p,{color:"green"}),className:"pop-up"},a):!t&&a?c.a.createElement("p",{style:Object(s.a)({},p,{color:"red"}),className:"pop-up"},a):null},b=function(e){return c.a.createElement("form",{onSubmit:e.submit},c.a.createElement("div",null,c.a.createElement("label",null,"name",c.a.createElement("input",{name:"phonebookEntry",htmlFor:"name",value:e.name,onChange:e.nameChange}))),c.a.createElement("div",null,c.a.createElement("label",null,"number",c.a.createElement("input",{name:"phonebookEntry",htmlFor:"number",value:e.number,onChange:e.numChange}))),c.a.createElement("button",{type:"submit"},"Save Contact"))},g=t(4),h=t.n(g),E="/api/persons";var v={getAll:function(){return h.a.get(E).then(function(e){return e.data})},create:function(e){return h.a.post(E,e).then(function(e){return e.data})},update:function(e,n){return h.a.put("".concat(E,"/").concat(e),n).then(function(e){return e.data})},remove:function(e){return h.a.delete("".concat(E,"/").concat(e)).then(function(e){return e.data})}},j=function(){var e=Object(a.useState)([]),n=Object(l.a)(e,2),t=n[0],u=n[1],r=Object(a.useState)(""),i=Object(l.a)(r,2),p=i[0],g=i[1],h=Object(a.useState)(""),E=Object(l.a)(h,2),j=E[0],k=E[1],O=Object(a.useState)(""),y=Object(l.a)(O,2),C=y[0],w=y[1],F=Object(a.useState)({success:null,message:null}),T=Object(l.a)(F,2),A=T[0],N=T[1];Object(a.useEffect)(function(){v.getAll().then(function(e){return u(Object(o.a)(e))}).catch(function(e){N({success:!1,message:e.message}),setTimeout(function(){return N({success:null,message:null})},3700)})},[]);return c.a.createElement(m,null,c.a.createElement("h1",null,"Phonebook"),c.a.createElement(f,{message:A}),c.a.createElement("label",null,"Filter By",c.a.createElement("input",{onChange:function(e){return w(e.target.value)},value:C})),c.a.createElement("h1",null,"add new contact"),c.a.createElement(b,{submit:function(e){e.preventDefault();var n=t.find(function(e){return e.name.toLowerCase()===p.toLowerCase()}),a={name:p,number:j,id:t.length+1};if(n)if(window.confirm("".concat(n.name.toUpperCase()," already exists, change number?"))){var c=Object(s.a)({},n,{number:j});v.update(n.id,c).then(function(e){u(t.map(function(n){return n.id!==c.id?n:e})),N({success:!0,message:"changed ".concat(c.name.toUpperCase(),"'s number")}),setTimeout(function(){return N({success:null,message:null})},3700)}).catch(function(e){var n=e.response.data.error,t=n.ok,a=n.code,c=n.codeName,u=n.keyPattern,r=n.keyValue,s=n.$clusterTime,o=n.operationtime;console.log({ok:t,code:a,codeName:c,keyPattern:u,keyValue:r,$clusterTime:s,operationtime:o}),N({success:!1,message:"a contact with ".concat(Object.keys(r)[0],": ").concat(Object.values(r)[0],", already exists")}),setTimeout(function(){return N({success:null,message:null})},3700)})}else N({success:!1,message:"declined replacing ".concat(p.toUpperCase(),"'s details")}),setTimeout(function(){return N({success:null,message:null})},3700);else{var r={name:p,number:j,id:t.length+1};v.create(a).then(function(e){u([].concat(Object(o.a)(t),[e])),N({success:!0,message:"added ".concat(r.name.toUpperCase())}),g(""),k(""),setTimeout(function(){return N({success:null,message:null})},3700)}).catch(function(e){var n=e.response.data.error.split(/:[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]/),t=Object(l.a)(n,3)[2];N({success:!1,message:t.split(/,[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]/)[0]}),setTimeout(function(){return N({success:null,message:null})},3700)})}},name:p,nameChange:function(e){return g(e.target.value)},number:j,numChange:function(e){return k(e.target.value)}}),c.a.createElement("h1",null,"numbers"),c.a.createElement("div",{className:"phonebook-entries"},c.a.createElement(d,{persons:t,query:C,clicked:function(e){var n=t.find(function(n){return n.id===e});if(!window.confirm("remove ".concat(n.name.toUpperCase()," ?")))return N({success:!0,message:"declined deleting ".concat(n.name.toUpperCase(),"'s contact")}),setTimeout(function(){return N({success:null,message:null})},3700);v.remove(e).then(function(){u(Object(o.a)(t.filter(function(n){return n.id!==e}))),N({success:!1,message:"removed ".concat(n.name.toUpperCase(),"'s details")}),setTimeout(function(){return N({success:null,message:null})},3700)}).catch(function(e){N({success:!1,message:e.message}),setTimeout(function(){return N({success:null,message:null})},3700)})}})))};t(47);r.a.createRoot(document.getElementById("root")).render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(j,{persons:[{name:"Arto Hellas",number:"123-456-789",id:1},{name:"Ada Lovelace",number:"39-44-5323523",id:2},{name:"Dan Abramov",number:"12-43-234345",id:3},{name:"Mary Poppendieck",number:"39-23-6423122",id:4},{name:"Rhyan LeShawn",number:"+1 408-616-8483",id:5}]})))}},[[20,2,1]]]);
//# sourceMappingURL=main.9da83bf0.chunk.js.map